{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-sm">
        <!-- Header Section -->
        <div class="card-header bg-primary text-white">
            <h2 class="font-weight-bold">Update Ticket</h2>
        </div>

        <!-- Body Section -->
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="row">
                    <!-- Left Column -->
                    <div class="col-md-6">
                        <fieldset>
                            <legend class="legend-custom">Basic Information</legend>
                            <div class="mb-3">
                                {{ form.title.label_tag }}
                                {{ form.title }}
                            </div>
                            <div class="mb-3">
                                {{ form.company_name.label_tag }}
                                {{ form.company_name }}
                            </div>
                            <div class="mb-3">
                                {{ form.contact_name.label_tag }}
                                {{ form.contact_name }}
                            </div>
                            <div class="mb-3">
                                {{ form.phone.label_tag }}
                                {{ form.phone }}
                            </div>
                            <div class="mb-3">
                                {{ form.email.label_tag }}
                                {{ form.email }}
                            </div>
                            <div class="mb-3">
                                {{ form.ticket_type.label_tag }}
                                {{ form.ticket_type }}
                            </div>
                            <div class="mb-3">
                                {{ form.status.label_tag }}
                                {{ form.status }}
                            </div>
                             <div class="mb-3">
                                {{ form.detailed_summary.label_tag }}
                                {{ form.detailed_summary }}
                            </div>
                            <div class="mb-3">
                                {{ form.ticket_source.label_tag }}
                                {{ form.ticket_source }}
                            </div>
                        </fieldset>
                    </div>

                    <!-- Right Column -->
                    <div class="col-md-6">
                        <fieldset>
                            <legend class="legend-custom">Additional Details</legend>
                            <div class="mb-3">
                                {{ form.resolution.label_tag }}
                                {{ form.resolution }}
                            </div>
                            <div class="mb-3">
                                {{ form.support_mode.label_tag }}
                                {{ form.support_mode }}
                            </div>
                            <div class="mb-3">
                                {{ form.assigned_to.label_tag }}
                                {{ form.assigned_to }}
                            </div>
                            <div class="mb-3">
                                {{ form.due_date.label_tag }}
                                {{ form.due_date }}
                            </div>
                        </fieldset>
                        <fieldset>
                            <legend class="legend-custom">Proof of Work</legend>
                            <div class="mb-3">
                                {{ form.proof_of_work.label_tag }}
                                {{ form.proof_of_work }}
                                {% if ticket.proof_of_work %}
                                    <p>Current Proof of Work: <a href="{{ ticket.proof_of_work.url }}" target="_blank">View</a></p>
                                {% endif %}
                            </div>
                        </fieldset>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="button" class="btn btn-secondary mt-3" onclick="window.history.back()">Back</button>
                <button type="submit" class="btn btn-primary mt-3">Update Ticket</button>
            </form>
        </div>
    </div>
</div>

<style>
    .card {
        border: none;
        border-radius: 8px;
    }

    .card-header {
        background-color: #071229;
        color: #ffffff;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
    }

    .card-body {
        padding: 20px;
    }

    .legend-custom {
        font-size: 1.2em;
        font-weight: bold;
        border-bottom: 2px solid #071229;
        margin-bottom: 1rem;
    }

    .btn {
        transition: all 0.3s ease;
    }

    .btn:hover {
        transform: scale(1.05);
    }
</style>
{% endblock %}
