{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-sm">
        <!-- Header Section -->
        <div class="card-header text-white">
            <h2 class="font-weight-bold">{{ ticket.company_name }} - Ticket Details</h2>
        </div>

        <!-- Body Section -->
        <div class="card-body">
            <div class="row">
                <!-- Left Column -->
                <div class="col-md-6">
                    <!-- Ticket Information -->
                    <fieldset class="border p-3">
                        <legend class="w-auto">Ticket Information</legend>
                        <h5 class="card-title">
                            <strong>ID:</strong> {{ ticket.id }}<br>
                            <strong>Contact Name:</strong> {{ ticket.contact_name }}<br>
                            <strong>Phone:</strong> {{ ticket.phone }}<br>
                            <strong>Email:</strong> {{ ticket.email }}<br>
                            <strong>Ticket Type:</strong> {{ ticket.ticket_type }}<br>
                            <strong>Status:</strong> {{ ticket.status }}<br>
                            <strong>Due Date:</strong> {{ ticket.due_date|date:"F j, Y, g:i a" }}<br>
                        </h5>
                    </fieldset>

                    <!-- Support Details -->
                    <fieldset class="border p-3 mt-3">
                        <legend class="w-auto">Support Details</legend>
                        <h5 class="card-title">
                            <strong>Support Mode:</strong> {{ ticket.support_mode }}<br>
                            <strong>Resolution:</strong> {{ ticket.resolution }}<br>
                            <strong>Created By:</strong> {{ ticket.created_by.username }}<br>
                            <strong>Last Modified At:</strong> {{ ticket.modified_at|date:"F j, Y, g:i a" }}<br>
                        </h5>
                    </fieldset>
                </div>

                <!-- Right Column -->
                <div class="col-md-6">
                    <!-- Detailed Summary -->
                    <fieldset class="border p-3">
                        <legend class="w-auto">Detailed Summary</legend>
                        <h5 class="card-title">
                            {{ ticket.detailed_summary }}
                        </h5>
                    </fieldset>

                    <!-- Proof of Work -->
                    <fieldset class="border p-3 mt-3">
                        <legend class="w-auto">Proof of Work</legend>
                        <h5 class="card-title">
                            {% if ticket.attachment %}
                                <a href="{{ ticket.attachment.url }}" target="_blank">Download Attachment</a>
                            {% else %}
                                No attachment available.
                            {% endif %}
                        </h5>
                    </fieldset>
                </div>
            </div>
        </div>

        <!-- Footer Section -->
        <div class="card-footer d-flex justify-content-between">
            <a href="{% url 'customers' %}" class="btn btn-secondary">Back to Customer</a>
            <a href="{% url 'update_ticket' ticket.pk %}" class="btn btn-primary">Update Ticket</a>
        </div>
    </div>
</div>

<style>
    .card {
        border: none;
        border-radius: 8px;
    }

    .card-header {
        background-color: #071229;
        color: #ffffff;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
    }

    .card-body {
        padding: 20px;
    }

    .row {
        margin-bottom: 10px;
    }

    .card-footer {
        background-color: #f8f9fa;
        border-top: 1px solid #dee2e6;
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
    }

    .btn {
        transition: all 0.3s ease;
    }

    .btn:hover {
        transform: scale(1.05);
    }
</style>
{% endblock %}
